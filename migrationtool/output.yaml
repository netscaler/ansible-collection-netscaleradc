---
- name: playbook
  hosts: localhost
  gather_facts: false
  vars:
    nsip: 10.106.210.21
    nitro_user: nsroot
    nitro_pass: notnsroot
  # module_defaults:
  #   group/netscaler.adc.nitro:
  #     nsip: 10.106.210.21
  #     nitro_user: nsroot
  #     nitro_pass: notnsroot
  #     validate_certs: false
  #     nitro_protocol: http
  tasks:
    # - name: Add a server
    #   delegate_to: localhost
    #   netscaler.adc.server:
    #     state: present
    #     nsip: 10.106.210.21
    #     nitro_user: nsroot
    #     nitro_pass: notnsroot
    #     validate_certs: false
    #     nitro_protocol: http
    #     name: test-server-1
    #     ipaddress: 192.168.1.1
    # - name: Setup an AppFW fieldtype
    #   delegate_to: localhost
    #   netscaler.adc.appfwfieldtype:
    #     state: present
    #     nsip: 10.106.210.21
    #     nitro_user: nsroot
    #     nitro_pass: notnsroot
    #     validate_certs: false
    #     nitro_protocol: http
    #     name: test_field_type
    #     regex: test_.*regex
    #     priority: '100'
    #     comment: some comment
    # - name: Setup file
    #   delegate_to: localhost
    #   netscaler.adc.systemfile:
    #     nitro_user: nsroot
    #     nitro_pass: notnsroot
    #     nsip: 10.106.210.21
    #     state: present
    #     filelocation: "/var/tmp"
    #     filename: "testfile.txt"
    #     filecontent: "Some file content"
    - name: Setup json content type
      delegate_to: localhost
      netscaler.adc.appfwjsoncontenttype:
        nsip: 10.106.210.21
        nitro_user: nsroot
        nitro_pass: notnsroot
        validate_certs: false
        nitro_protocol: http
        state: present
        jsoncontenttypevalue: prefix.*test
        isregex: REGEX
    - name: Setup confidential field id
      delegate_to: localhost
      netscaler.adc.appfwhtmlerrorpage:
        nsip: 10.106.210.21
        nitro_user: nsroot
        nitro_pass: notnsroot
        validate_certs: false
        nitro_protocol: http
        state: present
        name: from_yaml
        src: local://error.html
        comment: Some comment
        overwrite: true
    - name: Setup file
      delegate_to: localhost
      netscaler.adc.systemfile:
        nsip: 10.106.210.21
        nitro_user: nsroot
        nitro_pass: notnsroot
        validate_certs: false
        nitro_protocol: http
        state: present
        filelocation: /var/tmp
        filename: testfile.txt
        filecontent: Some file content
